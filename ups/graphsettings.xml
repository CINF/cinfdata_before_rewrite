<?xml version='1.0' standalone='yes'?>
<graphs>

  <!-- kVA UPS -->
  <graph type='kVA'>
    <query>SELECT unix_timestamp(time), value FROM ups_kVAPh1 where time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), value FROM ups_kVAPh2 where time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), value FROM ups_kVAPh3 where time between "{from}" and "{to}" order by time</query2>
    <ordering>left|green,left|blue,left|red</ordering>
    <ylabel>Power / VA</ylabel>
    <title>Power drawn from the UPS</title>
    <default_yscale>lin</default_yscale>
    <default_xscale>dat</default_xscale>
    <image_format>pdf</image_format>
  </graph>

  <!-- UPS POWER OVERVIEW -->
  <graph type='power'>
    <query>SELECT unix_timestamp(time), value FROM ups_WPh1 where time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), value FROM ups_WPh2 where time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), value FROM ups_WPh3 where time between "{from}" and "{to}" order by time</query2>
    <ordering>left|blue,left|red,left|green</ordering>
    <ylabel>Power / W</ylabel>
    <right_ylabel>Power / W</right_ylabel>
    <title>Power drawn from the UPS</title>
    <default_yscale>lin</default_yscale>
    <right_yscale>lin</right_yscale>
    <default_xscale>dat</default_xscale>
  </graph>

  <!-- UPS CURRENT OVERVIEW -->
  <graph type='current'>
    <query>SELECT unix_timestamp(time), value FROM ups_currentPh1 where time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), value FROM ups_currentPh2 where time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), value FROM ups_currentPh3 where time between "{from}" and "{to}" order by time</query2>
    <ordering>left|blue,left|red,left|green</ordering>
    <ylabel>Current / A</ylabel>
    <!--<right_ylabel>Power / W</right_ylabel>-->
    <title>Output current from the UPS</title>
    <default_yscale>lin</default_yscale>
    <!--<right_yscale>lin</right_yscale>-->
    <default_xscale>dat</default_xscale>
  </graph>

  <!-- UPS VOLTAGE OVERVIEW -->
  <graph type='voltage_output'>
    <query>SELECT unix_timestamp(time), value FROM ups_voltagePh1 where time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), value FROM ups_voltagePh2 where time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), value FROM ups_voltagePh3 where time between "{from}" and "{to}" order by time</query2>
    <ordering>left|blue,left|red,left|green</ordering>
    <ylabel>Voltage / V</ylabel>
    <!--<right_ylabel>Power / W</right_ylabel>-->
    <title>Output voltage from the UPS</title>
    <default_yscale>lin</default_yscale>
    <!--<right_yscale>lin</right_yscale>-->
    <default_xscale>dat</default_xscale>
  </graph>

  <!-- UPS VOLTAGE INPUT OVERVIEW -->
  <graph type='voltage_input'>
    <query>SELECT unix_timestamp(time), value FROM ups_voltage1NormalInput where time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), value FROM ups_voltage2NormalInput where time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), value FROM ups_voltage3NormalInput where time between "{from}" and "{to}" order by time</query2>
    <ordering>left|blue,left|red,left|green</ordering>
    <ylabel>Voltage / V</ylabel>
    <!--<right_ylabel>Power / W</right_ylabel>-->
    <title>Input voltage to the UPS</title>
    <default_yscale>lin</default_yscale>
    <!--<right_yscale>lin</right_yscale>-->
    <default_xscale>dat</default_xscale>
  </graph>

  <!-- UPS FREQUENCY -->
  <graph type='frequency'>
    <query>SELECT unix_timestamp(time), value FROM ups_frequencyNormalInput where time between "{from}" and "{to}" order by time</query>
    <ordering>left|blue,right|red</ordering>
    <ylabel>Voltage / V</ylabel>
    <!--<right_ylabel>Power / W</right_ylabel>-->
    <title>Input freqency</title>
    <default_yscale>lin</default_yscale>
    <right_yscale>lin</right_yscale>
    <default_xscale>dat</default_xscale>
  </graph>
  
  <!-- UPS BATTERY TEMP -->
  <graph type='batt_temperature'>
    <query>SELECT unix_timestamp(time), value FROM ups_batteryTemperatureLevel where time between "{from}" and "{to}" order by time</query>
    <ordering>left|blue,right|red</ordering>
    <ylabel>Voltage / V</ylabel>
    <!--<right_ylabel>Power / W</right_ylabel>-->
    <title>Battery temperature</title>
    <default_yscale>lin</default_yscale>
    <right_yscale>lin</right_yscale>
    <default_xscale>dat</default_xscale>
  </graph>

  <!-- TURBO TEMPERATURES -->
  <graph type='temperature_turbos'>
    <query>SELECT unix_timestamp(time), temperature FROM temperature_microreactorNG_chamberturbo where temperature between -1 and 1300 and time between "{from}" and "{to}" order by time</query>
    <query1>SELECT unix_timestamp(time), temperature FROM temperature_microreactorNG_bufferturbo where temperature between -1 and 1300 and time between "{from}" and "{to}" order by time</query1>
    <query2>SELECT unix_timestamp(time), temperature FROM temperature_hall_microreactors where temperature between -1 and 1300 and time between "{from}" and "{to}" order by time</query2>
    <ordering>left|green,left|blue,left|red</ordering>
    <ylabel>Temperature / C</ylabel>
    <title>Temperature of the turbos 
(chamber, green; buffer, blue;ambient, red)</title>
    <default_yscale>lin</default_yscale>
    <default_xscale>dat</default_xscale>
    <image_format>pdf</image_format>
  </graph>

  <!-- SAMPLE TEMPERATURES -->
  <graph type='temperature_sample'>
    <query>SELECT unix_timestamp(time), temperature FROM temperature_microreactorNG where temperature between -1 and 1300 and time between "{from}" and "{to}" order by time</query>
    <ylabel>Temperature / C</ylabel>
    <title>Temperature of the sample</title>
    <default_yscale>lin</default_yscale>
    <default_xscale>dat</default_xscale>
    <image_format>pdf</image_format>
  </graph>

  <!-- MASSSPECTRUM -->
  <graph type='massspectrum'>
    <query>SELECT x,y  FROM xy_values_microreactorNG where measurement = {id} order by id</query>
    <offset_query>SELECT min(y) FROM xy_values_microreactorNG where measurement = {id}</offset_query>
    <type>4</type>
    <xlabel>Mass / amu</xlabel>
    <ylabel>SEM current / A</ylabel>
    <title>Mass Spectrum</title>
    <default_xscale>lin</default_xscale>
    <default_yscale>lin</default_yscale>
    <param0_field>sem_voltage</param0_field>
    <param0_name>SEM Voltage / V</param0_name>
    <param1_field>preamp_range</param1_field>
    <param1_name>Range</param1_name>
  </graph>

  <!-- MASSTIME -->
  <graph type='masstime'>
    <query>SELECT x/1000,y  FROM xy_values_microreactorNG where measurement = {id} order by id</query>
    <t_query>SELECT x/1000,y FROM xy_values_microreactorNG where measurement = {t_id} order by id</t_query>
    <type>5</type>
    <image_format>png</image_format>
    <xlabel>Time / s</xlabel>
    <t_xlabel>Temp / </t_xlabel>
    <temperature_unit>C</temperature_unit>
    <ylabel>SEM current / A</ylabel>
    <title>Mass vs. time</title>
    <t_title>Mass vs. temperature</t_title>
    <legend_field_name>mass_label</legend_field_name>
    <right_y_axis_field_name>mass_label</right_y_axis_field_name>
    <right_y_axis_field_value>RTD temperature,Flow 1,Flow 2,Flow 3, Flow 4</right_y_axis_field_value>
    <right_yscale>lin</right_yscale>
    <right_ylabel>Temperature / C</right_ylabel>
    <default_xscale>lin</default_xscale>
    <default_yscale>lin</default_yscale>
    <param0_field>sem_voltage</param0_field>
    <param0_name>SEM Voltage / V</param0_name>
    <param1_field>preamp_range</param1_field>
    <param1_name>Range</param1_name>
    <legend_field_name>mass_label</legend_field_name>
  </graph>

  <global_settings>
    <measurements_table>measurements_microreactorNG</measurements_table>
    <xyvalues_table>xy_values_microreactorNG</xyvalues_table>
    <chamber_name>microreactorNG</chamber_name>
    <sql_username>microreactorNG</sql_username>
  </global_settings>
</graphs>
