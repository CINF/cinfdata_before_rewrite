<?
function plot_settings($type,$params=""){
    $settings = "";
    switch($type){
    case "pressure":
        $settings["query"] = "SELECT unix_timestamp(time), pressure FROM pressure_microreactor where time between \"" . $params["from"] . "\" and \"" . $params["to"] ."\" order by time desc";
        $settings["ylabel"] = "Pressure / mbar";
        $settings["titel"] = "Pressure in the Microreactor Chamber";
        $settings["default_yscale"] = "log";
        $settings["default_xscale"] = "dat";
        break;
    case "reactor_pressure":
        $settings["query"] = "SELECT unix_timestamp(time), pressure FROM pressure_microreactor_reactor where time between \"" . $params["from"] . "\" and \"" . $params["to"] ."\" order by time desc";
        $settings["ylabel"] = "Pressure / mbar";
        $settings["titel"] = "Pressure in the Microreactor Chamber";
        $settings["default_yscale"] = "lin";
        $settings["default_xscale"] = "dat";
        break;
    case "morning_pressure":
        $settings["query"] = "select unix_timestamp(date(time)), avg(pressure) from pressure_microreactor where hour(time) = 6 and minute(time) between 00 and 20 and time between \"" . $params["from"] . "\" and \"" . $params["to"] ."\" group by date(time) order by time desc limit 30";
        $settings["ylabel"] = "Pressure / mbar";
        $settings["titel"] = "Pressure at 6 am in the Microreactor Chamber";
        $settings["default_yscale"] = "log";
        $settings["default_xscale"] = "dat";
        $settings["default_style"] = "barplot";
        break;
    case "temperature":
        $settings["query"] = "SELECT unix_timestamp(time), temperature FROM temperature_microreactor where temperature between -1 and 1300 and time between \"" . $params["from"] . "\" and \"" . $params["to"] ."\" order by time";
        $settings["ylabel"] = "Temperature / C";
        $settings["titel"] = "Temperature in the Microreactor Chamber";
        $settings["default_yscale"] = "lin";
        $settings["default_xscale"] = "dat";
        break;
    case "massspectrum":
        $settings["query"] = "SELECT x,y  FROM xy_values_microreactor where measurement = " . $params["id"] . " order by id";
        $settings["offset_query"] = "SELECT min(y) FROM xy_values_microreactor where measurement = " . $params["id"];
        $settings["type"] = 4; // The type as defined in the types table
        $settings["xlabel"] = "Mass / amu";
        $settings["ylabel"] = "SEM current / A";
        $settings["titel"] = "Mass Spectrum";
        $settings["default_xscale"] = "lin";
        $settings["default_yscale"] = "log";
        $settings["param0_field"] = "sem_voltage";
        $settings["param0_name"] = "SEM Voltage / V";
        $settings["param1_field"] = "preamp_range";
        $settings["param1_name"] = "Range";
        break;
    case "masstime":
        $settings["query"] = "SELECT x/1000,y  FROM xy_values_microreactor where measurement = " . $params["id"] . " order by id";
        $settings["type"] = 5; // The type as defined in the types table
        $settings["xlabel"] = "Time / s";
        $settings["ylabel"] = "SEM current / A";
        $settings["titel"] = "Mass Spectrum";
        $settings["default_xscale"] = "lin";
        $settings["default_yscale"] = "lin";
        $settings["param0_field"] = "sem_voltage";
        $settings["param0_name"] = "SEM Voltage / V";
        $settings["param1_field"] = "preamp_range";
        $settings["param1_name"] = "Range";
        $settings["param2_field"] = "mass_label";
        $settings["param2_name"] = "Mass label";
        break;
    }
    $settings["measurements_table"] = "measurements_microreactor";
    $settings["xyvalues_table"] = "xy_values_microreactor";
    return($settings);
}
?>
